# STAT&BASIC-1. Описательные статистики и графики на Python v.2.0

**Содержание**

1. О чём этот модуль?
1. Описательные статистики
1. Важные термины
1. Меры центра
1. Тренировка
1. Квартили
1. Тренировка


## 1.1 О чём этот модуль?
В этом модуле мы поговорим о том, как описать набор данных и сделать первичные выводы.

Как правило, данные выглядят как набор чисел.
Например, такой:
23, 45, 23, 44, 34, 56, 54, 12, 11, 44, 44, 31, 4, 30, 20, 49, 38, 48, 38, 40, 36, 41, 33, 47, 32.
Нелегко сразу осмыслить этот набор и сделать выводы о данных.

Для этих целей существует два типа инструментов:

- описательные статистики;
- графики.


## 1.2 Описательные статистики
Описательная статистика — это формула, которая использует весь набор данных и дает нам ответ в виде одного числа.

Например, у нас есть такой набор чисел:
23, 45, 23, 44, 34, 56, 54, 12, 11, 44, 44, 31, 4, 30, 20, 49, 38, 48, 38, 40, 36, 41, 33, 47, 32.

Каждое число здесь показывает количество контрактов, заключенных в течение одного года одним менеджером по продажам.

### Меры центра
Отвечают на вопрос, какое значение является наиболее типичным в данном наборе?

1. Среднее - среднее арифметическое всех значений.
1. Медиана - серединное значение.
1. Мода - наиболее частое наблюдение.

### Меры разброса
Насколько сильно отличаются друг от друга значения?

1. Дисперсия и стандартное отклонение.
Стандартное отклонение показывает, насколько типичное значение в этом наборе данных отличается от среднего.
1. Размах — это разница между максимальным и минимальным значением.
1. Межквартильный размах.


## 1.3 Важные термины

**Случайная величина**. То, с чем мы работаем, `X`.
В нашем примере случайная величина - это количество контрактов, заключенных в течение года одним менеджером.

**Наблюдение**. Это конкретное значение случайной величины, `x`.

**Генеральная совокупность**. Это все множество объектов, которое нас интересует, `N`.
В нашем примере генеральная совокупность это все менеджеры по продажам внутри большой международной компании.

**Выборка**, часть генеральной совокупности, относительно которой мы проводим исследование, `n`.
Поскольку в реальной жизни, как правило, у нас нет информации обо всей генеральной совокупности,
нам приходится работать с какой-то ее частью. 


## 1.4 Меры центра

**Среднее** - среднее арифметическое всех значений.
Чувствительно к нетипичным значениям (выбросам), смещается в их сторону.
Среднее бывает выборочным и истинным — в зависимости от того, какой у нас есть набор данных
(выборка или генеральная совокупность).

**Мода** - наиболее частое наблюдение.

**Медиана** - серединное значение, отделяет 50% наименьших наблюдений от 50% наибольших наблюдений.
Чтобы найти медиану, нужно упорядочить наблюдения и найти "серидину".
Возвращает типичные значения даже для смещенных наборов данных и наборов с выбросами.


## 1.5 Тренировка

**Задание 1.5.2**

На сколько кг средний вес мужчины превышает средний вес женщины? Ответ округлите до 1 знака после точки-разделителя.

```python
import pandas as pd
import numpy as np

df = pd.DataFrame({
    'men': [80.2, 80.8, 57.5, 98, 50.5, 73.8, 77.4, 59.7, 77.9, 52.6],
    'women': [57.9, 57.3, 72.8, 48.2, 59.5, 48.3, 61.2, 53.9, 53.9, 70.7]
})

men_weight_mean = np.mean(df['men'])
women_weight_mean = np.mean(df['women'])
print(round(men_weight_mean - women_weight_mean, 1))
```


**Задание 1.5.3**

Дано два набора данных: 2, 7, 4, 3, 6, 4, 1, 2 и 5, 2, 4, 8, 1, 6, 7.

1. Найти медиану для первого набора данных.
1. Найти разницу между значения медиан второго и первого набора данных. 

```python
import numpy as np

first = [2, 7, 4, 3, 6, 4, 1, 2]
second = [5, 2, 4, 8, 1, 6, 7]

first_median = np.median(first)
second_median = np.median(second)

print(first_median)
print(second_median - first_median)
```

**Задание 1.5.4**

Даны две выборки весов пациентов.

```python
import pandas as pd

df = pd.DataFrame({
    'men': [80.2, 80.8, 57.5, 98, 50.5, 73.8, 77.4, 59.7, 77.9, 52.6],
    'women': [57.9, 57.3, 72.8, 48.2, 59.5, 48.3, 61.2, 53.9, 53.9, 70.7]
})
```

Найти

1. Медианный вес среди мужчин.
1. Медианный вес среди женщин.
1. Медианный вес всех пациентов в выборке.

```python
import pandas as pd
import numpy as np

df = pd.DataFrame({
    'men': [80.2, 80.8, 57.5, 98, 50.5, 73.8, 77.4, 59.7, 77.9, 52.6],
    'women': [57.9, 57.3, 72.8, 48.2, 59.5, 48.3, 61.2, 53.9, 53.9, 70.7]
})
patients = df['men'].append(df['women'])

print(np.median(df['men']))
# > 75.6
print(np.median(df['women']))
# > 57.6
print(np.median(patients))
# > 59.6
```


## 1.6 Квартили
Квартили — это такие значения, которые делят наш набор данных (выборнку) на четыре равные части (по 25 % в каждой).
Обозначаение: `Q1, Q2, Q3`.

`Q2` - медиана.

Как найти квартили?

1. Упорядочить элементы выборки по возрастанию.
1. Найти медиану - `Q2`, разделить выборку на две части. 
1. Найти медиану в нижней части - `Q1`, найти медиану в верхней части - `Q3`.


## 1.7 Тренировка

**Задание 1.7.1**

Два набора данных:

- 2, 7, 4, 3, 6, 4, 1, 2
- 5, 2, 4, 8, 1, 6, 7

Найдите квартили для обоих наборов данных и выберите все верные утверждения из списка.

```python
import numpy as np


def quartiles(arr: list):
    arr.sort()
    q2 = np.median(arr)
    q1 = np.median([a for a in arr if a < q2])
    q3 = np.median([a for a in arr if a > q2])

    return q1, q2, q3


first = [2, 7, 4, 3, 6, 4, 1, 2]
print(quartiles(first))
# > (2.0, 3.5, 5.0)

second = [5, 2, 4, 8, 1, 6, 7]
print(quartiles(second))
# > (2.0, 5.0, 7.0)
```

Можно использовать фунцию quantile библиотеки numpy.

```python
import numpy as np

first = [2, 7, 4, 3, 6, 4, 1, 2]
print(np.quantile(first, q=[0.25, 0.5, 0.75], interpolation='midpoint'))
# > [2.  3.5 5. ]
```

- Нижний квартиль в первом наборе совпадает с нижним квартилем во втором наборе. **Верно**
- Верхний квартиль в первом наборе данных совпадает с верхним квартилем во втором наборе. **Неверно**
- Верхний квартиль во втором наборе данных выше, чем в первом наборе данных. **Верно**


### Вычисляем квартили в Python
Для вычисления квартилей в pandas используется функция quantile().

У `quantile()`  существует необязательный параметр `interpolation`, который  указывает метод интерполяции,
который нужно использовать, когда требуемый квантиль лежит между двумя точками данных.
По умолчанию используется линейная интерполяция `linear`, нам нужно использовать `midpoint`.

```python
import pandas as pd

df = pd.DataFrame({
    'mens': [80, 80.8, 57.5, 98, 50.5, 73.8, 77.4, 59.7, 77.9, 52.6],
    'womens': [57.9, 57.3, 72.8, 48.2, 59.5, 48.3, 61.2, 53.9, 53.9, 70.7]
})

print(df.quantile(q=0.5, axis=0, numeric_only=True, interpolation='midpoint'))
# mens      75.6
# womens    57.6
```

**Задание 1.7.2**

Найдите Q1 и Q3 для мужчин и женщин, используя Python (выпишите результат, округляя до 1 знака после точки-разделителя).

```python
import pandas as pd

df = pd.DataFrame({
    'mens': [80, 80.8, 57.5, 98, 50.5, 73.8, 77.4, 59.7, 77.9, 52.6],
    'womens': [57.9, 57.3, 72.8, 48.2, 59.5, 48.3, 61.2, 53.9, 53.9, 70.7]
})

mens_quantiles = df.mens.quantile(q=[0.25, 0.75], interpolation='midpoint')
print(round(mens_quantiles[0.25], 1), round(mens_quantiles[0.75], 1))
# > 58.6, 79.0

womens_quantiles = df.womens.quantile(q=[0.25, 0.75], interpolation='midpoint')
print(round(womens_quantiles[0.25], 1), round(womens_quantiles[0.75], 1))
# > 53.9, 60.4
```
